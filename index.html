<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="–ö–ª–∏–∫–µ—Ä" />
  <link rel="apple-touch-icon" href="https://em-content.zobj.net/source/apple/354/star_2b50.png" />
  <title>–ö–ª–∏–∫–µ—Ä ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ, –º—è–≥–∫–æ–µ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{--blur-bg:6px;--cell-h:88px}
    body{font-family:'Inter',sans-serif;background:#0b1026;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;color:#fff}
    .game-wrapper{position:relative;width:100%;max-width:420px;aspect-ratio:9/16;border-radius:20px;overflow:hidden;box-shadow:0 10px 40px rgba(0,0,0,.6)}
    .game-bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;transition:opacity .35s ease, filter .35s ease}
    .dim-3{filter:brightness(0.97)}
    .game-content{position:relative;z-index:1;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:12px;background:rgba(0,0,0,.28)}

    /* –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ */
    .podium{position:absolute;bottom:-26px;left:50%;transform:translateX(-50%);width:200px;height:60px;border-radius:50%;background:radial-gradient(ellipse at 50% 50%,#FBBF24 0%,#F59E0B 65%,rgba(0,0,0,0) 70%);filter:drop-shadow(0 0 6px #facc15);z-index:5;animation:pulse 3s ease-in-out infinite}

    /* –ü–µ—Ä—Å–æ–Ω–∞–∂: –º—è–≥–∫–æ–µ –ø—Ä–∏–∑–µ–º–ª–µ–Ω–∏–µ + –æ—Ç–¥–µ–ª—å–Ω—ã–µ longhands –¥–ª—è –Ω–∞–∂–∞—Ç–∏—è */
    .character{position:relative;top:16px;cursor:pointer;user-select:none;z-index:6;animation:land .6s cubic-bezier(.2,.9,.2,1) 60ms both;translate:0 0;scale:1;transition:translate .1s ease-in-out, scale .1s ease-in-out}
    .character:active{translate:0 6px;scale:.98}
    .character.pressed{translate:0 6px;scale:.98}

    @keyframes land{0%{transform:translateY(-24px) scale(1.02);filter:drop-shadow(0 6px 10px rgba(0,0,0,.45))}70%{transform:translateY(2px)}100%{transform:translateY(0)}}

    .big-score{margin-top:-10px}

    .floating-coin{position:absolute;display:flex;align-items:center;gap:6px;font-size:1.1rem;font-weight:800;color:#facc15;animation:floatUp 1s ease-out forwards;pointer-events:none;text-shadow:0 2px 4px rgba(0,0,0,.55);z-index:60}
    .floating-coin img{width:18px;height:18px}
    @keyframes floatUp{from{transform:translateY(0);opacity:1}to{transform:translateY(-100px);opacity:0}}
    @keyframes pulse{0%,100%{filter:drop-shadow(0 0 8px #facc15) drop-shadow(0 0 14px #f59e0b)}50%{filter:drop-shadow(0 0 18px #facc15) drop-shadow(0 0 30px #f59e0b)}}

    .screen{position:absolute;left:0;right:0;bottom:72px;top:122px;margin:12px;padding:12px 12px 16px;border-radius:16px;background:rgba(0,0,0,.65);backdrop-filter:blur(var(--blur-bg));-webkit-backdrop-filter:blur(var(--blur-bg));overflow:auto;display:none;z-index:30}
    .screen.active{display:block}
    .screen, .screen *{color:#fff}
    .screen-title{display:flex;align-items:center;justify-content:space-between;gap:8px;position:sticky;top:0;background:linear-gradient(to bottom, rgba(0,0,0,.7), rgba(0,0,0,0));padding:6px 0 10px;z-index:1}
    .screen-close{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:10px;background:rgba(255,255,255,.12)}

    .tab-btn[aria-selected="true"]{outline:2px solid #e5e7eb;background-color:rgb(255 255 255 / .08)}
    .scene-dim .center-area{filter:blur(1px) brightness(.92)}

    /* –°–ª–æ—Ç-–º–∞—à–∏–Ω–∞ */
    .slots-wrap{display:flex;flex-direction:column;align-items:center;gap:12px}
    .slots-box{position:relative;width:300px;border-radius:18px;padding:12px;background:linear-gradient(180deg,rgba(255,191,41,.35),rgba(255,159,8,.25));box-shadow:inset 0 0 0 4px rgba(255,255,255,.15),0 10px 30px rgba(0,0,0,.5)}
    .slots-window{position:relative;overflow:hidden;height:var(--cell-h);background:rgba(0,0,0,.25);border-radius:12px;box-shadow:inset 0 0 0 3px rgba(255,255,255,.14)}
    .reels{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;height:100%;padding:8px}
    .reel{position:relative;overflow:hidden;border-radius:10px;background:rgba(0,0,0,.18);box-shadow:inset 0 0 0 2px rgba(255,255,255,.08)}
    .reel-inner{position:absolute;left:0;right:0;top:0;transform:translateY(0);will-change:transform}
    .cell{display:flex;align-items:center;justify-content:center;height:var(--cell-h);font-weight:900;font-size:52px;text-shadow:0 2px 4px rgba(0,0,0,.35)}
    .slots-buttons{display:flex;gap:10px;justify-content:center}
    .win-banner{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%) scale(.7);padding:14px 18px;border-radius:14px;background:rgba(0,0,0,.8);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);color:#fff;font-weight:800;font-size:26px;opacity:0;pointer-events:none;z-index:3}
    .win-banner.show{animation:popIn .7s ease forwards}
    @keyframes popIn{0%{opacity:0;transform:translate(-50%,-50%) scale(.6)}60%{opacity:1;transform:translate(-50%,-50%) scale(1.1)}100%{opacity:1;transform:translate(-50%,-50%) scale(1)}}
  </style>
</head>
<body>
  <div class="game-wrapper" id="wrapper">
    <img id="bg-room" class="game-bg" src="https://i.postimg.cc/bYC9rVNc/Chat-GPT-Image-16-2025-17-40-13.png" alt="–§–æ–Ω: –ö–æ–º–Ω–∞—Ç–∞">
    <img id="bg-alt" class="game-bg" src="https://i.postimg.cc/CKj0fd2f/Chat-GPT-Image-17-2025-01-38-13.png" alt="–§–æ–Ω: –ù–æ–≤—ã–π" style="opacity:0">

    <div id="game" class="game-content">
      <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å + –õ–í–õ –±–∞—Ä -->
      <header class="flex justify-between items-center w-full mb-2">
        <div class="flex items-center gap-2">
          <div class="flex items-center gap-2 bg-black/40 px-3 py-2 rounded-full">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-sky-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l7 4v6c0 5-3.5 9-7 10-3.5-1-7-5-7-10V6l7-4z"/></svg>
            <span class="text-white/90 text-sm">LVL</span>
            <span id="level" class="font-extrabold">1</span>
          </div>
          <div class="flex items-center gap-2 bg-black/40 px-3 py-2 rounded-full">
            <img src="https://em-content.zobj.net/source/apple/354/star_2b50.png" alt="‚≠ê" class="w-5 h-5"/>
            <span id="score" class="font-bold text-lg">0</span>
          </div>
        </div>
        <div class="flex items-center gap-2 bg-black/40 px-3 py-2 rounded-full">
          <span class="text-yellow-300 text-2xl">‚ÇΩ</span>
          <span id="money-display" class="font-bold text-lg">0.00</span>
        </div>
      </header>

      <div class="w-full px-1 mb-2">
        <div class="flex items-center justify-between text-xs text-white/80 mb-1">
          <span>–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è</span>
          <span><span id="lvl-progress">0</span> / 200</span>
        </div>
        <div class="w-full bg-white/10 rounded-full h-2">
          <div id="lvl-progress-bar" class="h-2 bg-sky-400 rounded-full" style="width:0%"></div>
        </div>
      </div>

      <!-- –¶–µ–Ω—Ç—Ä -->
      <main class="center-area flex-grow flex flex-col items-center justify-center">
        <div class="big-score flex items-center gap-2 mb-2">
          <img src="https://em-content.zobj.net/source/apple/354/star_2b50.png" alt="Star Icon" class="w-10 h-10">
          <span id="score-big" class="text-5xl font-bold">0</span>
        </div>
        <div class="relative w-72 h-72 md:w-96 md:h-96 mb-6">
          <div class="podium"></div>
          <img id="character" src="https://i.postimg.cc/fLpZNSq3/3.png" alt="–ò–≥—Ä–æ–≤–æ–π –ø–µ—Ä—Å–æ–Ω–∞–∂" class="character w-full h-full drop-shadow-lg" onerror="this.onerror=null;this.src='https://i.postimg.cc/fLpZNSq3/3.png';">
        </div>
        <div class="w-full max-w-xs mt-1">
          <div class="flex justify-between text-sm font-semibold mb-1 text-white">
            <span>–≠–Ω–µ—Ä–≥–∏—è</span>
            <span><span id="energy-level">100</span> / <span id="max-energy">100</span></span>
          </div>
          <div class="w-full bg-black/60 rounded-full h-4">
            <div id="energy-bar" class="bg-gradient-to-r from-yellow-400 to-amber-500 h-4 rounded-full" style="width:100%"></div>
          </div>
        </div>
      </main>

      <!-- –≠–∫—Ä–∞–Ω—ã -->
      <section id="screen-income" class="screen" aria-hidden="true">
        <div class="screen-title"><h2 class="text-xl font-bold">–î–æ—Ö–æ–¥</h2><button class="screen-close" data-close>‚úï –ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="space-y-2 text-sm">
          <div class="flex justify_between bg-white/10 p-3 rounded-lg"><span>–ó–≤—ë–∑–¥ –∑–∞ –∫–ª–∏–∫</span><strong id="stat-per-click">1</strong></div>
          <div class="flex justify_between bg-white/10 p-3 rounded-lg"><span>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ / —Å–µ–∫</span><strong id="stat-regen">1</strong></div>
          <div class="flex justify_between bg-white/10 p-3 rounded-lg"><span>–ú–∞–∫—Å. —ç–Ω–µ—Ä–≥–∏—è</span><strong id="stat-max-energy">100</strong></div>
        </div>
      </section>

      <section id="screen-upgrades" class="screen" aria-hidden="true">
        <div class="screen-title"><h2 class="text-xl font-bold">–£–ª—É—á—à–µ–Ω–∏—è</h2><button class="screen-close" data-close>‚úï –ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="grid gap-3 text-sm">
          <div class="bg-white/10 p-3 rounded-lg">
            <div class="flex items-center justify-between mb-2"><div>
              <p class="font-semibold">+1 –∫ –∑–≤—ë–∑–¥–∞–º –∑–∞ –∫–ª–∏–∫</p>
              <p class="text-xs text-white/80">–£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –¥–æ—Ö–æ–¥ —Å –∫–∞–∂–¥–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è</p></div>
              <button id="buy-click" class="px-3 py-1 rounded-md bg-yellow-500/30 hover:bg-yellow-500/50">–ö—É–ø–∏—Ç—å –∑–∞ <span id="cost-click">20</span> ‚≠ê</button>
            </div>
          </div>
          <div class="bg-white/10 p-3 rounded-lg">
            <div class="flex items-center justify-between mb-2"><div>
              <p class="font-semibold">+10 –∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏</p>
              <p class="text-xs text-white/80">–ë–æ–ª—å—à–µ –∫–ª–∏–∫–æ–≤ –ø–æ–¥—Ä—è–¥</p></div>
              <button id="buy-max" class="px-3 py-1 rounded-md bg-blue-500/30 hover:bg-blue-500/50">–ö—É–ø–∏—Ç—å –∑–∞ <span id="cost-max">30</span> ‚≠ê</button>
            </div>
          </div>
          <div class="bg-white/10 p-3 rounded-lg">
            <div class="flex items-center justify-between mb-2"><div>
              <p class="font-semibold">+0.5 –∫ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é —ç–Ω–µ—Ä–≥–∏–∏</p>
              <p class="text-xs text-white/80">–≠–Ω–µ—Ä–≥–∏—è –±—ã—Å—Ç—Ä–µ–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è</p></div>
              <button id="buy-regen" class="px-3 py-1 rounded-md bg-green-500/30 hover:bg-green-500/50">–ö—É–ø–∏—Ç—å –∑–∞ <span id="cost-regen">25</span> ‚≠ê</button>
            </div>
          </div>
          <div class="bg-white/10 p-3 rounded-lg">
            <div class="flex items-center justify-between mb-2"><div>
              <p class="font-semibold">–ù–æ–≤—ã–π —Ñ–æ–Ω (—Ç–≤–æ–π 9:16)</p>
              <p class="text-xs text-white/80">–°–º–µ–Ω–∏—Ç –∑–∞–¥–Ω–∏–π —Ñ–æ–Ω –Ω–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π 9:16</p></div>
              <div class="flex items-center gap-2">
                <button id="buy-bg" class="px-3 py-1 rounded-md bg-purple-500/30 hover:bg-purple-500/50">–ö—É–ø–∏—Ç—å –∑–∞ <span id="cost-bg">200</span> ‚≠ê</button>
                <button id="apply-bg" class="px-3 py-1 rounded-md bg-purple-600/30 hover:bg-purple-600/50" disabled>–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="screen-game" class="screen" aria-hidden="true">
        <div class="screen-title"><h2 class="text-xl font-bold">–ò–≥—Ä–∞: –°–ª–æ—Ç-–º–∞—à–∏–Ω–∞</h2><button class="screen-close" data-close>‚úï –ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="slots-wrap">
          <div class="slots-box">
            <div class="slots-window">
              <div class="reels">
                <div class="reel"><div class="reel-inner" id="reel0"></div></div>
                <div class="reel"><div class="reel-inner" id="reel1"></div></div>
                <div class="reel"><div class="reel-inner" id="reel2"></div></div>
              </div>
            </div>
            <div id="slotsWinBanner" class="win-banner">+0 ‚≠ê</div>
          </div>
          <div class="slots-buttons">
            <button id="spinBtn" class="px-4 py-2 rounded-lg bg-amber-500/80 hover:bg-amber-500 font-bold">SPIN (‚àí5 ‚≠ê)</button>
            <button id="paytableBtn" class="px-4 py-2 rounded-lg bg-white/15 hover:bg-white/25 font-semibold">–¢–∞–±–ª–∏—Ü–∞</button>
          </div>
          <div id="cooldownText" class="text-sm text-white/80">–ì–æ—Ç–æ–≤–æ –∫ —Å–ø–∏–Ω—É</div>
          <div id="paytable" class="hidden text-sm bg-white/10 p-3 rounded-lg w-full max-w-xs">
            <p class="font-semibold mb-1">–í—ã–ø–ª–∞—Ç—ã (3 –≤ —Ä—è–¥):</p>
            <ul class="list-disc list-inside space-y-0.5">
              <li>üçí √ó3 ‚Üí +15 ‚≠ê</li>
              <li>üçã √ó3 ‚Üí +20 ‚≠ê</li>
              <li>üçâ √ó3 ‚Üí +40 ‚≠ê</li>
              <li>üçá √ó3 ‚Üí +60 ‚≠ê</li>
              <li>üçÄ √ó3 ‚Üí +30 ‚≠ê</li>
              <li>üçë √ó3 ‚Üí +35 ‚≠ê</li>
              <li>7Ô∏è‚É£ √ó3 ‚Üí +250 ‚≠ê</li>
              <li>–õ—é–±—ã–µ 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö ‚Üí +5 ‚≠ê</li>
              <li>–î–≤–∞ 7Ô∏è‚É£ ‚Üí +40 ‚≠ê</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="screen-wallet" class="screen" aria-hidden="true">
        <div class="screen-title"><h2 class="text-xl font-bold">–ö–æ—à–µ–ª—ë–∫</h2><button class="screen-close" data-close>‚úï –ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="grid gap-3 text-sm">
          <div class="flex justify-between bg-white/10 p-3 rounded-lg"><span>–ë–∞–ª–∞–Ω—Å –∑–≤—ë–∑–¥</span><strong id="wallet-stars">0 ‚≠ê</strong></div>
          <div class="flex justify-between bg-white/10 p-3 rounded-lg"><span>–ë–∞–ª–∞–Ω—Å ‚ÇΩ</span><strong id="wallet-rub">0.00 ‚ÇΩ</strong></div>
          <button id="reset-progress" class="mt-2 px-3 py-2 rounded-lg bg-red-500/70 hover:bg-red-500 text-white font-semibold">–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (–∑–≤—ë–∑–¥—ã –∏ —É—Ä–æ–≤–µ–Ω—å)</button>
        </div>
      </section>

      <section id="screen-friends" class="screen" aria-hidden="true">
        <div class="screen-title"><h2 class="text-xl font-bold">–î—Ä—É–∑—å—è</h2><button class="screen-close" data-close>‚úï –ó–∞–∫—Ä—ã—Ç—å</button></div>
        <ul class="space-y-2 text-sm">
          <li class="bg-white/10 p-3 rounded-lg flex items-center justify-between"><span>–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ ‚Äî –ø–æ–ª—É—á–∏ 20 ‚≠ê</span><button class="px-3 py-1 rounded-md bg-indigo-500/30 hover:bg-indigo-500/50">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button></li>
          <li class="bg-white/10 p-3 rounded-lg flex items-center justify-between"><span>–ï—â—ë –∑–∞–≥–ª—É—à–∫–∞ —Ä–∞–∑–¥–µ–ª–∞</span><button class="px-3 py-1 rounded-md bg-indigo-500/30 hover:bg-indigo-500/50">–°–∫–æ—Ä–æ</button></li>
        </ul>
      </section>

      <section id="screen-quests" class="screen" aria-hidden="true">
        <div class="screen-title"><h2 class="text-xl font-bold">–ó–∞–¥–∞–Ω–∏—è</h2><button class="screen-close" data-close>‚úï –ó–∞–∫—Ä—ã—Ç—å</button></div>
        <div class="space-y-2 text-sm">
          <div class="bg-white/10 p-3 rounded-lg flex items-center justify_between"><span>–°–¥–µ–ª–∞–π 50 –∫–ª–∏–∫–æ–≤</span><button data-quest="50" class="quest-btn px-3 py-1 rounded-md bg-rose-500/40 hover:bg-rose-500/60">–ó–∞–±—Ä–∞—Ç—å 15 ‚≠ê</button></div>
          <div class="bg-white/10 p-3 rounded-lg flex items-center justify_between"><span>–ö—É–ø–∏ 1 —É–ª—É—á—à–µ–Ω–∏–µ</span><button data-quest="upgrade1" class="quest-btn px-3 py-1 rounded-md bg-rose-500/40 hover:bg-rose-500/60">–ó–∞–±—Ä–∞—Ç—å 10 ‚≠ê</button></div>
        </div>
      </section>

      <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é -->
      <footer class="w-full bg-black/45 p-2 rounded-2xl mt-2">
        <nav class="flex justify-around items-end">
          <button class="tab-btn flex flex-col items-center text-center text-white/90 hover:text-white transition-colors" data-screen="screen-income" aria-selected="false">
            <div class="p-3 bg-yellow-500/20 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-yellow-300"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg></div>
            <span class="text-xs mt-1">–î–æ—Ö–æ–¥</span>
          </button>
          <button class="tab-btn flex flex-col items-center text-center text-white/90 hover:text-white transition-colors" data-screen="screen-upgrades" aria-selected="false">
            <div class="p-3 bg-blue-500/20 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-300"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
            <span class="text-xs mt-1">–£–ª—É—á—à–µ–Ω–∏—è</span>
          </button>
          <button class="tab-btn flex flex-col items-center text-center text-white/90 hover:text-white transition-colors" data-screen="screen-game" aria-selected="false">
            <div class="p-3 bg-amber-500/20 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-amber-300"><rect x="3" y="4" width="18" height="16" rx="3"/><path d="M8 4v16M16 4v16"/></svg></div>
            <span class="text-xs mt-1">–ò–≥—Ä–∞</span>
          </button>
          <button class="tab-btn flex flex-col items-center text-center text-white/90 hover:text-white transition-colors" data-screen="screen-wallet" aria-selected="false">
            <div class="p-3 bg-green-500/20 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-300"><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg></div>
            <span class="text-xs mt-1">–ö–æ—à–µ–ª–µ–∫</span>
          </button>
          <button class="tab-btn flex flex-col items-center text-center text-white/90 hover:text-white transition-colors" data-screen="screen-friends" aria-selected="false">
            <div class="p-3 bg-purple-500/20 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-purple-300"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg></div>
            <span class="text-xs mt-1">–î—Ä—É–∑—å—è</span>
          </button>
          <button class="tab-btn flex flex-col items-center text-center text-white/90 hover:text-white transition-colors" data-screen="screen-quests" aria-selected="false">
            <div class="p-3 bg-rose-500/20 rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-rose-300"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div>
            <span class="text-xs mt-1">–ó–∞–¥–∞–Ω–∏—è</span>
          </button>
        </nav>
      </footer>
    </div>
  </div>

  <script>
    const SAVE_KEY = 'clicker_save_v1';
    let stars=0,xp=0,energy=100,maxEnergy=100,perClick=1,regenPerSec=1;let priceClick=20,priceMax=30,priceRegen=25,priceBg=200;let ownedBgAlt=false,appliedBg='room';
    const CHAR_LVL1='https://i.postimg.cc/fLpZNSq3/3.png';
    const CHAR_LVL2='https://i.postimg.cc/0NBQgS0S/2.png';
    function saveState(){const p={stars,xp,energy,maxEnergy,perClick,regenPerSec,priceClick,priceMax,priceRegen,priceBg,ownedBgAlt,appliedBg,ts:Date.now()};try{localStorage.setItem(SAVE_KEY,JSON.stringify(p));}catch(e){}}
    function loadState(){try{const raw=localStorage.getItem(SAVE_KEY);if(raw){const d=JSON.parse(raw);if(typeof d.stars==='number')stars=d.stars;xp=typeof d.xp==='number'?d.xp:Math.max(stars,0);energy=d.energy??energy;maxEnergy=d.maxEnergy??maxEnergy;perClick=d.perClick??perClick;regenPerSec=d.regenPerSec??regenPerSec;priceClick=d.priceClick??priceClick;priceMax=d.priceMax??priceMax;priceRegen=d.priceRegen??priceRegen;priceBg=d.priceBg??priceBg;ownedBgAlt=!!d.ownedBgAlt;appliedBg=(d.appliedBg==='alt')?'alt':'room';const secs=d.ts?Math.max(0,Math.floor((Date.now()-d.ts)/1000)):0;energy=Math.min(maxEnergy,energy+secs*regenPerSec);}}catch(e){}
      if(!ownedBgAlt&&priceBg<200)priceBg=200}
    loadState();

    const wrapper=document.getElementById('wrapper');
    const gameRoot=document.getElementById('game');
    const character=document.getElementById('character');
    const levelEl=document.getElementById('level');
    const lvlProgressText=document.getElementById('lvl-progress');
    const lvlProgressBar=document.getElementById('lvl-progress-bar');
    const scoreDisplay=document.getElementById('score');
    const scoreBig=document.getElementById('score-big');
    const energyBar=document.getElementById('energy-bar');
    const energyLevelDisplay=document.getElementById('energy-level');
    const maxEnergyDisplay=document.getElementById('max-energy');
    const walletStars=document.getElementById('wallet-stars');
    const statPerClick=document.getElementById('stat-per-click');
    const statRegen=document.getElementById('stat-regen');
    const statMaxEnergy=document.getElementById('stat-max-energy');
    const btnBuyClick=document.getElementById('buy-click');
    const btnBuyMax=document.getElementById('buy-max');
    const btnBuyRegen=document.getElementById('buy-regen');
    const costClick=document.getElementById('cost-click');
    const costMax=document.getElementById('cost-max');
    const costRegen=document.getElementById('cost-regen');
    const btnBuyBg=document.getElementById('buy-bg');
    const btnApplyBg=document.getElementById('apply-bg');
    const costBgSpan=document.getElementById('cost-bg');
    const bgRoom=document.getElementById('bg-room');
    const bgAlt=document.getElementById('bg-alt');
    const resetBtn=document.getElementById('reset-progress');

    function currentLevel(){return Math.floor(xp/200)+1}
    function refreshCharacterByLevel(){const lvl=currentLevel();const need=lvl>=2?CHAR_LVL2:CHAR_LVL1;if(character.getAttribute('src')!==need)character.setAttribute('src',need)}
    function refreshLevelBar(){const prog=xp%200;lvlProgressText.textContent=prog;lvlProgressBar.style.width=(prog/200*100)+'%'}

    function refreshUI(){levelEl.textContent=String(currentLevel());refreshCharacterByLevel();refreshLevelBar();scoreDisplay.textContent=stars;scoreBig.textContent=stars;if(walletStars)walletStars.textContent=stars+' ‚≠ê';energyLevelDisplay.textContent=Math.floor(energy);if(maxEnergyDisplay)maxEnergyDisplay.textContent=maxEnergy;energyBar.style.width=(energy/maxEnergy*100)+'%';if(statPerClick)statPerClick.textContent=perClick;if(statRegen)statRegen.textContent=regenPerSec;if(statMaxEnergy)statMaxEnergy.textContent=maxEnergy;if(costClick)costClick.textContent=priceClick;if(costMax)costMax.textContent=priceMax;if(costRegen)costRegen.textContent=priceRegen;if(costBgSpan)costBgSpan.textContent=priceBg;if(btnApplyBg)btnApplyBg.disabled=!ownedBgAlt;if(appliedBg==='alt'){bgAlt.style.opacity=1;bgRoom.style.opacity=0;bgAlt.classList.add('dim-3')}else{bgAlt.style.opacity=0;bgRoom.style.opacity=1;bgAlt.classList.remove('dim-3')}}
    refreshUI();

    function showFloatingCoin(evt){const el=document.createElement('div');el.className='floating-coin';el.innerHTML='+'+perClick+' <img src="https://em-content.zobj.net/source/apple/354/star_2b50.png" alt="‚≠ê">';const rect=wrapper.getBoundingClientRect();const cx=(evt.clientX||(evt.touches&&evt.touches[0].clientX))-rect.left;const cy=(evt.clientY||(evt.touches&&evt.touches[0].clientY))-rect.top-20;el.style.left=(cx+(Math.random()*24-12))+'px';el.style.top=cy+'px';wrapper.appendChild(el);setTimeout(()=>el.remove(),1000)}
    function gainStars(a){stars+=a;xp+=a}
    function onClickCharacter(e){if(energy>=1){gainStars(perClick);energy-=1;showFloatingCoin(e);refreshUI();saveState()}}

    function pressDown(){character.classList.add('pressed')}
    function pressUp(){character.classList.remove('pressed')}
    character.addEventListener('mousedown',e=>{pressDown();onClickCharacter(e)});
    character.addEventListener('mouseup',pressUp);
    character.addEventListener('mouseleave',pressUp);
    character.addEventListener('touchstart',e=>{e.preventDefault();pressDown();onClickCharacter(e)},{passive:false});
    character.addEventListener('touchend',pressUp);
    character.addEventListener('touchcancel',pressUp);

    setInterval(()=>{if(energy<maxEnergy){energy+=regenPerSec/2;if(energy>maxEnergy)energy=maxEnergy;refreshUI()}},500);

    // Tabs
    const tabButtons=[...document.querySelectorAll('.tab-btn')];
    const screens={income:document.getElementById('screen-income'),upgrades:document.getElementById('screen-upgrades'),game:document.getElementById('screen-game'),wallet:document.getElementById('screen-wallet'),friends:document.getElementById('screen-friends'),quests:document.getElementById('screen-quests')};
    function hideAllScreens(){Object.values(screens).forEach(el=>{if(el){el.classList.remove('active');el.setAttribute('aria-hidden','true')}});gameRoot.classList.remove('scene-dim')}
    function setActiveBtn(btn){tabButtons.forEach(b=>b.setAttribute('aria-selected','false'));if(btn)btn.setAttribute('aria-selected','true')}
    function openScreenById(id){hideAllScreens();const el=document.getElementById(id);if(el){el.classList.add('active');el.setAttribute('aria-hidden','false');gameRoot.classList.add('scene-dim')}}
    function closeScreens(){hideAllScreens();setActiveBtn(null)}
    tabButtons.forEach(btn=>btn.addEventListener('click',()=>{const id=btn.getAttribute('data-screen');const el=document.getElementById(id);const opened=el&&el.classList.contains('active');if(opened){closeScreens()}else{openScreenById(id);setActiveBtn(btn)}}));
    document.querySelectorAll('[data-close]').forEach(b=>b.addEventListener('click',closeScreens));

    // –ü–æ–∫—É–ø–∫–∏
    function tryBuy(cost){if(stars>=cost){stars-=cost;refreshUI();saveState();return true}return false}
    btnBuyClick?.addEventListener('click',()=>{if(tryBuy(priceClick)){perClick+=1;priceClick=Math.ceil(priceClick*1.6);refreshUI();saveState()}});
    btnBuyMax?.addEventListener('click',()=>{if(tryBuy(priceMax)){maxEnergy+=10;energy=Math.min(maxEnergy,energy+10);priceMax=Math.ceil(priceMax*1.6);refreshUI();saveState()}});
    btnBuyRegen?.addEventListener('click',()=>{if(tryBuy(priceRegen)){regenPerSec=Math.round((regenPerSec+0.5)*10)/10;priceRegen=Math.ceil(priceRegen*1.6);refreshUI();saveState()}});
    btnBuyBg?.addEventListener('click',()=>{if(ownedBgAlt)return;if(tryBuy(priceBg)){ownedBgAlt=true;btnApplyBg.disabled=false;priceBg=Math.ceil(priceBg*1.6);refreshUI();saveState()}});
    btnApplyBg?.addEventListener('click',()=>{if(!ownedBgAlt)return;if(appliedBg==='room'){bgAlt.style.opacity=1;bgRoom.style.opacity=0;appliedBg='alt';bgAlt.classList.add('dim-3')}else{bgAlt.style.opacity=0;bgRoom.style.opacity=1;appliedBg='room';bgAlt.classList.remove('dim-3')}saveState()});

    // –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    resetBtn?.addEventListener('click',()=>{
      stars=0; xp=0; energy=100; maxEnergy=100; perClick=1; regenPerSec=1;
      priceClick=20; priceMax=30; priceRegen=25; priceBg=200;
      ownedBgAlt=false; appliedBg='room';
      try{ localStorage.removeItem(SAVE_KEY) }catch(e){}
      refreshUI(); saveState();
    });

    // –°–ª–æ—Ç—ã
    const SPIN_COST=5,COOLDOWN_MS=900;const symbols=[{emoji:'üçí',weight:24,payout3:15},{emoji:'üçã',weight:20,payout3:20},{emoji:'üçâ',weight:14,payout3:40},{emoji:'üçá',weight:10,payout3:60},{emoji:'üçÄ',weight:16,payout3:30},{emoji:'üçë',weight:12,payout3:35},{emoji:'7Ô∏è‚É£',weight:4,payout3:250}];
    const reelsEls=[document.getElementById('reel0'),document.getElementById('reel1'),document.getElementById('reel2')];
    const spinBtn=document.getElementById('spinBtn');const paytable=document.getElementById('paytable');const paytableBtn=document.getElementById('paytableBtn');const cooldownText=document.getElementById('cooldownText');const winBanner=document.getElementById('slotsWinBanner');
    paytableBtn?.addEventListener('click',()=>{paytable.classList.toggle('hidden')});
    const CELL_H=parseInt(getComputedStyle(document.documentElement).getPropertyValue('--cell-h'))||88;const LOOPS=8;const reels=reelsEls.map(el=>({el,arr:[],current:0}));
    function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}
    function buildReel(data){const base=[];for(let n=0;n<LOOPS;n++){for(const s of symbols){base.push(s.emoji)}}shuffle(base);data.arr=base;data.el.innerHTML=base.map(e=>`<div class='cell'>${e}</div>`).join('');data.el.style.transform=`translateY(${-data.current*CELL_H}px)`}
    reels.forEach(buildReel);
    function weightedPickIdx(){const total=symbols.reduce((a,s)=>a+s.weight,0);let r=Math.random()*total;for(let i=0;i<symbols.length;i++){r-=symbols[i].weight;if(r<=0)return i}return symbols.length-1}
    function ensureTargetIndex(data,symbol,start){let idx=data.arr.indexOf(symbol,start);if(idx!==-1)return idx;const extra=[];for(let k=0;k<symbols.length*3;k++){extra.push(symbols[k%symbols.length].emoji)}extra.push(symbol);data.arr.push(...extra);const frag=document.createDocumentFragment();extra.forEach(e=>{const d=document.createElement('div');d.className='cell';d.textContent=e;frag.appendChild(d)});data.el.appendChild(frag);return data.arr.length-1}
    function outcomePay(a,b,c){if(a===b&&b===c){const s=symbols.find(x=>x.emoji===a);return s?s.payout3:0}if(a===b||a===c||b===c){const two7=[a,b,c].filter(x=>x==='7Ô∏è‚É£').length===2;return two7?40:5}return 0}
    function showWin(val){if(val<=0)return;winBanner.textContent=`+${0} ‚≠ê`;winBanner.classList.add('show');let cur=0;const step=Math.max(1,Math.floor(val/20));const t=setInterval(()=>{cur=Math.min(val,cur+step);winBanner.textContent=`+${cur} ‚≠ê`;if(cur>=val){clearInterval(t);setTimeout(()=>winBanner.classList.remove('show'),900)}},30)}
    let spinning=false,lastSpin=0;function spin(){if(spinning)return;const now=Date.now();if(now-lastSpin<COOLDOWN_MS){cooldownText.textContent='–ü–æ–¥–æ–∂–¥–∏—Ç–µ‚Ä¶';return}if(stars<SPIN_COST){cooldownText.textContent='–ù—É–∂–Ω–æ 5 ‚≠ê';return}stars-=SPIN_COST;refreshUI();saveState();spinning=true;lastSpin=now;cooldownText.textContent='–ö—Ä—É—Ç–∏—Ç—Å—è‚Ä¶';const targets=[weightedPickIdx(),weightedPickIdx(),weightedPickIdx()].map(i=>symbols[i].emoji);const durations=[],finalIdx=[],res=[];reels.forEach((data,ri)=>{const turnsBase=24+ri*8;const jitter=Math.floor(Math.random()*symbols.length);const start=data.current+turnsBase+jitter;const tIdx=ensureTargetIndex(data,targets[ri],start);finalIdx[ri]=tIdx;res[ri]=targets[ri];const dur=1.0+ri*0.2;durations[ri]=dur;data.el.style.transition='none';data.el.style.transform=`translateY(${-data.current*CELL_H}px)`;requestAnimationFrame(()=>{data.el.style.transition=`transform ${dur}s cubic-bezier(.12,.68,.08,1)`;data.el.style.transform=`translateY(${-tIdx*CELL_H}px)`})});const totalTime=Math.max(...durations)*1000+120;setTimeout(()=>{reels.forEach((d,i)=>d.current=finalIdx[i]);const gain=outcomePay(res[0],res[1],res[2]);if(gain>0){gainStars(gain);showWin(gain)}refreshUI();saveState();spinning=false;cooldownText.textContent='–ì–æ—Ç–æ–≤–æ –∫ —Å–ø–∏–Ω—É'},totalTime)}
    document.getElementById('spinBtn')?.addEventListener('click',spin);
  </script>
</body>
</html>
